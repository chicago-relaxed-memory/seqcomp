\begin{figure}
  \bookmark{\PwTmcaTITLE{1} Semantics}
  \raggedright
  \noindent
  If $\aPS \in \sLPAR{\aPSS_1}{\aPSS_2}$ then  
  $(\exists\aPS_1\in\aPSS_1)$ $(\exists\aPS_2\in\aPSS_2)$
  \begin{multicols}{2}
    \begin{enumerate}[topsep=0pt,label=(\textsc{p}\arabic*),ref=\textsc{p}\arabic*]
    \item \label{par-E}
      $\aEvs = (\aEvs_1\uplus\aEvs_2)$,
    \item \label{par-lambda}
      ${\labeling}=\PBR{{\labeling_1}\cup {\labeling_2}}$, 
      \stepcounter{enumi}
    \item[] \labeltext[\textsc{p}3]{}{par-kappa}
      \begin{enumerate}[leftmargin=0pt]
      \item \label{par-kappa1}
        if $\aEv\in\aEvs_1$ then $\labelingForm(\aEv) \riff \labelingForm_1(\aEv)$,
      \item \label{par-kappa2}
        if $\aEv\in\aEvs_2$ then $\labelingForm(\aEv) \riff \labelingForm_2(\aEv)$,
      \end{enumerate}
    \item \label{par-tau}
      $\aTr{\bEvs}{\bForm} \riff \aTr[1]{\bEvs}{\bForm}$,
    \item \label{par-term}
      $\aTerm \riff \aTerm[1]\land\aTerm[2]$,
    \item \label{par-le}
        ${\le}\rsupset{\le_1}{\le_2}$,
    \item \label{par-rf}
        ${\rrfx}\rsupset{\rrfx_1}{\rrfx_2}$.
      \stepcounter{enumi}
    \end{enumerate}
  \end{multicols}
  \medskip

  \noindent
  If $\aPS \in \sSEMI{\aPSS_1}{\aPSS_2}$ then $(\exists\aPS_1\in\aPSS_1)$
  $(\exists\aPS_2\in\aPSS_2)$\\
  % let $\aTerm[1](\aEv) = \aTerm[1]$ if $\labeling_2(\aEv)$ is a $\srelease$
  % and $\aTerm[1](\aEv) = \TRUE$ otherwise,\\
  % let $\labelingForm'_2(\aEv)=\aTr[1]{\Cdown{\aEv}}{\labelingForm_2(\aEv})$,
  % where
  % $\Cdown{\aEv}=\{ \cEv \mid \cEv \lt \aEv \}$%, if $\labeling(\aEv)$ is a write, and $\Cdown{\aEv}=\aEvs_1$, otherwise
  %
  % \begin{math}
  %   \Cdown{\aEv}=
  %   \begin{cases}
  %     \{ \cEv \mid \cEv \lt \aEv \} & \textif \labeling(\aEv) \;\text{is a write}
  %     \\
  %     \aEvs_1 & \textotherwise
  %   \end{cases}
  % \end{math}
  % let
  % \begin{math}
  %   \smash{
  %   \downarrow\aEv=\begin{cases}
  %     \{ \cEv \mid \cEv \lt \aEv \} &\textif \labeling(\aEv) \;\text{is a write}\\
  %     \aEvs_1 &\textotherwise
  %   \end{cases}}
  % \end{math}
  \begin{multicols}{2}
    \begin{enumerate}[topsep=0pt,label=(\textsc{s}\arabic*),ref=\textsc{s}\arabic*]
    \item[\eqref{seq-E}]
      \eqref{seq-lambda}\;
      \eqref{seq-kappa}\;
      \eqref{seq-tau}\;
      \eqref{seq-term}\;
      \eqref{seq-le}\;
      as in \reffig{fig:seq},
      \setcounter{enumi}{\value{le}}
    % \item \label{seq-E}
    %   $\aEvs = (\aEvs_1\cup\aEvs_2)$,
    % \item \label{seq-lambda}
    %   ${\labeling}=\PBR{{\labeling_1}\cup {\labeling_2}}$, 
    %   \stepcounter{enumi}
    % \item[] \labeltext[\textsc{s}3]{}{seq-kappa}
    %   \begin{enumerate}[leftmargin=0pt]
    %   \item \label{seq-kappa1}
    %     if $\aEv\in\aEvs_1\setminus\aEvs_2$ then $\labelingForm(\aEv) \riff \labelingForm_1(\aEv)$,
    %   \item \label{seq-kappa2}
    %     if $\aEv\in\aEvs_2\setminus\aEvs_1$ then $\labelingForm(\aEv) \riff \labelingForm'_2(\aEv) \land \aTerm[1](\aEv)$,
    %   \item \label{seq-kappa12}
    %     % if $\aEv{\in}\aEvs_1{\cap}\aEvs_2$ then $\labelingForm(\aEv) \riff \labelingForm_1(\aEv){\lor}\labelingForm'_2(\aEv)$,\\
    %     if $\aEv\in\aEvs_1\cap\aEvs_2$ then $\labelingForm(\aEv) \riff (\labelingForm_1(\aEv)\lor\labelingForm'_2(\aEv)) \land \aTerm[1](\aEv)$,
    %     % where
    %     % $\labelingForm'_2(\aEv)=\aTr[1]{\Cdown{\aEv}}{\labelingForm_2(\aEv})$,
    %     % where $\Cdown{\aEv}=\{ \cEv \mid \cEv \lt \aEv \}$ if $\labeling(\aEv)$
    %     % is a write, and $\Cdown{\aEv}=\aEvs_1$, otherwise,
    %   % \item \label{seq-kappa-release}
    %   %   if $\labeling_2(\aEv)$ is a $\srelease$ then $\labelingForm(\aEv) \riff \aTerm[1]$,
    %   \end{enumerate}
    % \item \label{seq-tau}
    %   $\aTr{\bEvs}{\bForm} \riff \aTr[1]{\bEvs}{\aTr[2]{\bEvs}{\bForm}}$,
    % \item \label{seq-term}
    %   $\aTerm \riff \aTerm[1]\land\aTr[1]{}{\aTerm[2]}$,
    %   \stepcounter{enumi}
    \item[]
      % \labeltext[\textsc{s}6]{}{seq-le}
      \begin{enumerate}[leftmargin=0pt]
      % \item \label{seq-le-extends}
      %   ${\le}\rsupset{\le_1}{\le_2}$, 
      \item \label{seq-le-delays}
        if $\labeling_1(\bEv) \rdelays \labeling_2(\aEv)$ and
        %$\labelingForm_1(\bEv) \land \labelingForm_2(\aEv)$ is satisfiable then
        $\bEv\le\aEv$,
        % either $\bEv\le\aEv$ or $\labelingForm(\bEv)\land\labelingForm(\aEv)$
        % is unsatisfiable.
      \end{enumerate}
    %   \stepcounter{enumi}
      \item \label{seq-rf}
        ${\rrfx}\rsupset{\rrfx_1}{\rrfx_2}$.
    % \item[] \labeltext[\textsc{s}7]{}{seq-rf}
    %   \begin{enumerate}[leftmargin=0pt]
    %   \item \label{seq-rf-extends}
    %     ${\rrfx}\rextends{\rrfx_1}{\rrfx_2}$,
    %   \item \label{seq-rf-le}
    %     if $\bEv\in\aEvs_1$, $\aEv\in\aEvs_2$ and $\bEv\xrfx\aEv$ then $\bEv\le\aEv$.
    %   \end{enumerate}
      %   % if $\cEv\in\aEvs_1$ and $(\bEv,\aEv)\in\PBR{{\rrfx}\cap(\aEvs_1\times \aEvs_2)}$ then 
      %   % either $\labeling(\cEv) \reorderca \labeling(\bEv)$
      %   % or $\cEv\le\bEv$,
    \end{enumerate}
  \end{multicols}
  \medskip

  \noindent
  If $\aPS \in \sIF{\aForm}\sTHEN\aPSS_1\sELSE\aPSS_2\sFI$ then
  $(\exists\aPS_1\in\aPSS_1)$ $(\exists\aPS_2\in\aPSS_2)$
  \begin{multicols}{2}
    \begin{enumerate}[topsep=0pt,label=(\textsc{i}\arabic*),ref=\textsc{i}\arabic*]
    \item[\eqref{if-E}]
      \eqref{if-lambda}\;
      \eqref{if-kappa}\;
      \eqref{if-tau}\;
      \eqref{if-term}\; 
      \eqref{if-le}\; as in \reffig{fig:seq},
      \setcounter{enumi}{\value{le}}
    % \item \label{if-E}
    %   $\aEvs = (\aEvs_1\cup\aEvs_2)$,
    % \item \label{if-lambda}
    %   ${\labeling}=\PBR{{\labeling_1}\cup {\labeling_2}}$, 
    %   % \item[(\ref{par-E}--\ref{par-le})] as for $\sLPAR{}{}$,
    %   \stepcounter{enumi}
    % \item[] \labeltext[\textsc{i}3]{}{if-kappa}
    %   \begin{enumerate}[leftmargin=0pt]
    %   \item \label{if-kappa1}
    %     if $\aEv\in\aEvs_1\setminus\aEvs_2$ then $\labelingForm(\aEv) \riff \aForm\land\labelingForm_1(\aEv)$,
    %   \item \label{if-kappa2}
    %     if $\aEv\in\aEvs_2\setminus\aEvs_1$ then $\labelingForm(\aEv) \riff \neg\aForm\land\labelingForm_2(\aEv)$, 
    %   \item \label{if-kappa12}
    %     if $\aEv\in\aEvs_1\cap\aEvs_2$\\ then
    %     % $\labelingForm(\aEv) \riff (\aForm\limplies\labelingForm_1(\aEv))\land(\neg\aForm\limplies\labelingForm_2(\aEv))$,
    %     $\labelingForm(\aEv) \riff (\aForm\land\labelingForm_1(\aEv))\lor(\neg\aForm\land\labelingForm_2(\aEv))$,
    %   \end{enumerate}
    % \item \label{if-tau}
    %   % $\aTr{\bEvs}{\bForm} \riff (\aForm\limplies\aTr[1]{\bEvs}{\bForm})\land(\neg\aForm\limplies\aTr[2]{\bEvs}{\bForm})$,
    %   $\aTr{\bEvs}{\bForm} \riff (\aForm\land\aTr[1]{\bEvs}{\bForm})\lor(\neg\aForm\land\aTr[2]{\bEvs}{\bForm})$,
    % \item \label{if-term}
    %   % $\aTerm \riff (\aForm\limplies\aTerm[1])\land(\neg\aForm\limplies\aTerm[2])$.
    %   $\aTerm \riff (\aForm\land\aTerm[1])\lor(\neg\aForm\land\aTerm[2])$.
    %   \stepcounter{enumi}
    % \item[]
    %   % \labeltext[\textsc{i}6]{}{if-le}
    %   \begin{enumerate}[leftmargin=0pt]
    %     % \item \label{if-le-rf}
    %     %   if $\bEv\in\aEvs_1$ and $\aEv\in\aEvs_2$ and $\bEv\xrfx\aEv$ then $\bEv\le\aEv$,
    %   \item \label{if-le-extends}
    %     ${\le}\rextends{\le_1}{\le_2}$,
    %   \item \label{if-le-subset}
    %     ${\le}\rsubset{\le_1}{\le_2}$,
    %   \end{enumerate}
    %   \stepcounter{enumi}
      \item \label{if-rf}
        ${\rrfx}\rsupset{\rrfx_1}{\rrfx_2}$.
    % \item[] \labeltext[\textsc{i}7]{}{if-rf}
    %   \begin{enumerate}[leftmargin=0pt]
    %   \item \label{if-rf-extends}
    %     ${\rrfx}\rextends{\rrfx_1}{\rrfx_2}$,
    %   \item \label{if-rf-le}
    %     ${\rrfx}\rsubset{\rrfx_1}{\rrfx_2}$.
    %   \end{enumerate}
    \end{enumerate}
  \end{multicols}
  \medskip

  % \noindent
  % If $\aPS\in\sLET{\aReg}{\aExp}$ then $\aEvs = \emptyset$ and
  % $\aTr{\bEvs}{\bForm} \riff \bForm[\aExp/\aReg]$.
  % \medskip

  % \noindent
  % If $\aPS \in \sLOAD[\amode]{\aReg}[\ascope]{\aLoc}[\aThrd]$ then
  % $(\exists\aVal\in\Val)$
  % \begin{multicols}{2}
  %   \begin{enumerate}[topsep=0pt,label=(\textsc{r}\arabic*),ref=\textsc{r}\arabic*]
  %   \item \label{read-E}
  %     if $\bEv,\aEv\in\aEvs$ then $\bEv=\aEv$,
  %   \item \label{read-lambda}
  %     $\labelingAct(\aEv) = \DR[\amode]{\aLoc}[\ascope]{\aVal}[\aThrd]$,
  %   \item \label{read-kappa}
  %     $\labelingForm(\aEv) \riff \Q{\aLoc}$,
  %     %$\labelingForm(\aEv) \riff \TRUE$,
  %     \stepcounter{enumi}
  %   \item[] \labeltext[\textsc{r}4]{}{read-tau}
  %     \begin{enumerate}[leftmargin=0pt]
  %     \item \label{read-tau-dep}
  %       if $\aEvs\neq\emptyset$ and $(\aEvs\cap\bEvs)\neq\emptyset$ then
  %       \begin{math}
  %         \aTr{\bEvs}{\bForm} \riff
  %         \aVal{=}\aReg
  %         \limplies \bForm
  %       \end{math},    
  %     \item \label{read-tau-ind}
  %       if $\aEvs\neq\emptyset$ and $(\aEvs\cap\bEvs)=\emptyset$ then
  %       \begin{math}
  %         \aTr{\bEvs}{\bForm} \riff
  %         \PBR{\aVal{=}\aReg \lor \aLoc{=}\aReg} \limplies
  %         \bForm,
  %       \end{math}
  %     \item \label{read-tau-empty}
  %       if $\aEvs=\emptyset$ then
  %       \begin{math}
  %         \aTr{\bEvs}{\bForm} \riff
  %         % \PBR{\aVal{=}\aReg \lor \aLoc{=}\aReg} \limplies
  %         \bForm,
  %       \end{math}
  %     \end{enumerate}
  %     \stepcounter{enumi}
  %   \item[] \labeltext[\textsc{r}5]{}{read-term}
  %     \begin{enumerate}[leftmargin=0pt]
  %     \item \label{read-term-nonempty}
  %       if $\aEvs\neq\emptyset$ or $\amode\lemode\mRLX$ then $\aTerm \riff \TRUE$. 
  %     \item \label{read-term-empty}
  %       if $\aEvs=\emptyset$ and $\amode\gemode\mACQ$ then $\aTerm \riff \FALSE$. 
  %     \end{enumerate}      
  %   % \item \label{read-term}
  %   %   if $\aEvs=\emptyset$ and $\amode\gemode\mACQ$ then $\aTerm \riff \FALSE$. 
  %   \end{enumerate}
  % \end{multicols}
  % \medskip

  % \noindent
  % If $\aPS \in \sSTORE[\amode]{\aLoc}[\ascope]{\aExp}[\aThrd]$ then
  % $(\exists\aVal\in\Val)$
  % \begin{multicols}{2}
  %   \begin{enumerate}[topsep=0pt,label=(\textsc{w}\arabic*),ref=\textsc{w}\arabic*]
  %   \item \label{write-E}
  %     if $\bEv,\aEv\in\aEvs$ then $\bEv=\aEv$,
  %   \item \label{write-lambda}
  %     $\labelingAct(\aEv) = \DW[\amode]{\aLoc}[\ascope]{\aVal}[\aThrd]$,
  %   \item \label{write-kappa}
  %     \begin{math}
  %       \labelingForm(\aEv) \riff
  %       \aExp{=}\aVal
  %     \end{math},    
  %   % \item \label{write-tau}
  %   %   % if $(\aEvs\cap\bEvs)\neq\emptyset$ then
  %   %   \begin{math}
  %   %     \aTr{\bEvs}{\bForm} \riff 
  %   %     \bForm
  %   %     [\aExp/\aLoc]
  %   %     % \land\aExp{=}\aVal
  %   %   \end{math},
  %     \stepcounter{enumi}      
  %   \item[] \labeltext[\textsc{w}5]{}{write-tau}
  %     \begin{enumerate}[leftmargin=0pt]
  %     \item \label{write-tau-nonempty}
  %       if $\aEvs\neq\emptyset$ then 
  %       \makebox[0cm][l]{%
  %       \begin{math}
  %         \aTr{\bEvs}{\bForm} \riff 
  %         \bForm
  %         [\aExp/\aLoc][\aExp{=}\aVal/\Q{\aLoc}]
  %       \end{math}}
  %     \item \label{write-tau-empty}
  %       if $\aEvs=\emptyset$ then 
  %       \begin{math}
  %         \aTr{\bEvs}{\bForm} \riff 
  %         \bForm
  %         [\aExp/\aLoc][\FALSE/\Q{\aLoc}]
  %       \end{math}
  %     \end{enumerate}
  %     \stepcounter{enumi}      
  %   \item[] \labeltext[\textsc{w}5]{}{write-term}
  %     \begin{enumerate}[leftmargin=0pt]
  %     \item \label{write-term-nonempty}
  %       if $\aEvs\neq\emptyset$ then $\aTerm \riff \aExp{=}\aVal$,
  %     \item \label{write-term-empty}
  %       if $\aEvs=\emptyset$ then $\aTerm \riff \FALSE$.
  %     \end{enumerate}
  %   \end{enumerate}
  % \end{multicols}
  % \medskip

  % \noindent
  % If $\aPS \in \sFENCE[\ascope]{\amode}[\aThrd]$ then
  % % $(\exists\aLocs\subseteq\Loc)$
  % % $(\exists\bmode\in\{\amode,\mRLX\})$
  % \begin{multicols}{2}
  %   \begin{enumerate}[topsep=0pt,label=(\textsc{f}\arabic*),ref=\textsc{f}\arabic*]
  %   \item \label{fence-E}
  %     % $\aEvs\neq\emptyset$ and
  %     if $\bEv,\aEv\in\aEvs$ then $\bEv=\aEv$,
  %   \item \label{fence-lambda}
  %     $\labelingAct(\aEv) = \DF[\ascope]{\amode}[\aThrd]$,
  %   \item \label{fence-kappa}
  %     $\labelingForm(\aEv) \riff \TRUE$,
  %   \item \label{fence-tau}
  %     $\aTr{\bEvs}{\bForm} \riff \bForm$,
  %     \stepcounter{enumi}      
  %   \item[] \labeltext[\textsc{f}5]{}{fence-term}
  %     \begin{enumerate}[leftmargin=0pt]
  %     \item \label{fence-term-nonempty}
  %       if $\aEvs\neq\emptyset$ then $\aTerm \riff \TRUE$,
  %     \item \label{fence-term-empty}
  %       if $\aEvs=\emptyset$ then $\aTerm \riff \FALSE$.
  %     \end{enumerate}
  %   % \item \label{fence-term}
  %   %   if $\aEvs=\emptyset$ then $\aTerm \riff \FALSE$.
  %   \end{enumerate}
  % \end{multicols}

  \caption{\PwTmcaTITLE{1} Semantics}
  \label{fig:mca1}
\end{figure}
